{% extends 'base.html' %}
{% block content %}

{% load static %}
<script type="text/javascript">var redipsURL = '/javascript/drag-and-drop-table-row/';</script>
<link rel="stylesheet" href="{% static 'refrigerators/icon_display/two_doors.css' %}" type="text/css" media="screen" />
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<!--<script type="text/javascript" src="{% static 'refrigerators/icon_display/redips-drag.js' %}"></script>-->
<script type="text/javascript" src="{% static 'refrigerators/icon_display/redips-drag-min.js' %}"></script>
<script type="text/javascript" src="{% static 'refrigerators/icon_display/two_doors.js' %}"></script>

<article>
	<!-- tables inside this DIV could contain drag-able content  -->
	{% csrf_token %}
	<div>
		<button type="button" class="btn btn-outline-primary mb-3"
				onclick="tableToJson('{{ request.user.id }}',document.getElementById('ice-fridge'),document.getElementById('fresh-fridge'))">
			저장
		</button>
	</div>

	<div id="redips-drag" style="float:left;">
		<table class="tbl1" id="ice-fridge">
			<colgroup>
				<col width="30"/>
				<col width="70"/>
				<col width="70"/>
				<col width="70"/>
				<col width="70"/>
				<col width="70"/>
			</colgroup>
			<tbody>
			<tr>
				<th colspan="6" class="redips-mark">냉동</th>
			</tr>
			{% for ctx in ice %}
			<tr class="rl">
				<td class="redips-rowhandler"><div class="redips-drag redips-row"></div></td>
				{% for k, v in ctx.items %}
				<td>
					{% if v %}
					<div class="redips-drag white">
						<img src="https://cdn-icons-png.flaticon.com/512/426/426750.png?w=1380&t=st=1681199906~exp=1681200506~hmac=fcb5f90ae7cb363b274dfed7153fa68dc76882a74a0463bac3c9dee263239c25" alt="사과" style="width:15px;">
						<a href="javascript:void(0)" title="{{v.str}}" id="joinbtn">
							{% if v.name|length <= 4 %}
							{{ v.name|slice:":4" }}
							{% else %}
							<span class="min-font-size">
								{{ v.name }}
							</span>
							{% endif %}
						</a>
						<small name="uid" hidden="hidden">{{ v.id }}</small>
					</div>
					{% endif %}
				</td>
				{% endfor %}
			</tr>
			{% endfor %}

			<tr>
				<td colspan="6" class="redips-mark">
					<span hidden="hidden">Message line</span>
				</td>
			</tr>
			</tbody>
		</table>

		<table id="fresh-fridge">
			<colgroup>
				<col width="30"/>
				<col width="70"/>
				<col width="70"/>
				<col width="70"/>
				<col width="70"/>
				<col width="70"/>
			</colgroup>
			<tbody>
			<tr>
				<th colspan="6" class="redips-mark">냉장</th>
			</tr>
			{% for ctx in fresh %}
			<tr class="rl">
				<td class="redips-rowhandler"><div class="redips-drag redips-row"></div></td>
				{% for k, v in ctx.items %}
				<td>
					{% if v %}
					<div class="redips-drag white">
<!--						<img src="https://cdn-icons-png.flaticon.com/512/426/426750.png?w=1380&t=st=1681199906~exp=1681200506~hmac=fcb5f90ae7cb363b274dfed7153fa68dc76882a74a0463bac3c9dee263239c25" alt="사과" style="width:15px;">-->
						<img src="data:image/png;base64, {{v.icon_img}}" style="width:15px;">
						<a href="javascript:void(0)" title="{{v.str}}">{{ v.name|slice:":4" }}</a>
						<small name="uid" hidden="hidden">{{ v.id }}</small>
					</div>
					{% endif %}
				</td>
				{% endfor %}
			</tr>
			{% endfor %}

			<tr>
				<td colspan="6" class="redips-mark">
					<span hidden="hidden">Message line</span>
				</td>
			</tr>
			</tbody>
		</table>


	</div>

</article>

{% endblock %}